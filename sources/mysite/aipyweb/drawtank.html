<html>
	<head>
    <script  type="text/javascript">
	var tankX = 120;
	var tankY = 690;
	var tank = new Image();
 	var oldBack = new Image();
	var back = new Image();
	var ctx;
	var type = 1;
	var oldBack = new Image();
	var oldtankX = 120;
	var oldtankY = 690;
	var example;
	var line_1;
	function game() {
            	example = document.getElementById('example'),
		example.getContext;            	
		ctx     = example.getContext('2d');
	    	ctx.fillStyle = 'orange';
    	    	ctx.fillRect(100, 100, example.width, example.height);
		ctx.fill();
	    	ctx     = example.getContext('2d');
	    	ctx.fillStyle = 'gray';
	    	ctx.fillRect(100, 100, 924, 6);
            	ctx.fillRect(100, 100, 6, 620);
	    	ctx.fillRect(100, 714, 924, 6);
	    	ctx.fillRect(1018, 100, 6, 620);
	    	ctx.fillRect(100, 200, 724, 6);
            	ctx.fillRect(300, 620, 724, 6);
            	ctx.fillRect(400, 300, 6, 250);
            	ctx.fillRect(700, 300, 6, 250);
		ctx.fill();	    	
		ctx     = example.getContext('2d');
	    	ctx.fillStyle = 'red';
            	ctx.fillRect(824, 200, 194, 6);
            	ctx.fillRect(106, 620, 200, 6);
            	ctx.fillRect(550, 206, 6, 414);
	    	ctx.fillRect(106, 420, 294, 6);
                ctx.fillRect(706, 420, 312, 6);
		ctx.fill();
		var img = new Image();   // Создаём новый объект Image
		img.src = 'tank1.png';
      		var draw = function(){
			ctx.drawImage(img, 100, 100, 800, 800, 120, 690, 20, 20);
		}
		setInterval(draw, 100);
		//makeTank(4);
		gameLoop = setInterval(doGameLoop, 10);
		window.addEventListener('keydown', whatKey, true);
		
	}
	function makeTank(type)
	{
		
		switch (type){	//1 - up; //2 - down //3 - right // 4 - left
		case 1:
			back = ctx.getImageData(tankX, tankY, 25, 10);
			oldBack = ctx.getImageData(tankX, tankY, 25, 10);
			ctx.fillStyle = "black";
	       		ctx.rect(tankX, tankY, 15, 10);
	        	ctx.fill();
			ctx.fillStyle = "black";
       			ctx.rect(tankX+15, tankY+4, 7, 2);
        		ctx.fill();
			ctx.fillStyle = "black";
       			ctx.rect(tankX+22, tankY+3, 2, 4);
        		ctx.fill();
			tank = ctx.getImageData(tankX, tankY, 25, 10);
			ctx.putImageData(oldBack, tankX, tankY);
			break;
		case 2:
			back = ctx.getImageData(tankX, tankY, 25, 10);
			oldBack = ctx.getImageData(tankX, tankY, 25, 10);
			ctx.fillStyle = "black";
       			ctx.rect(tankX, tankY, 15, 10);
        		ctx.fill();
			ctx.fillStyle = "black";
       			ctx.rect(tankX - 7, tankY+4, 7, 2);
        		ctx.fill();
			ctx.fillStyle = "black";
       			ctx.rect(tankX-9, tankY+3, 2, 4);
        		ctx.fill();
			tank = ctx.getImageData(tankX-9, tankY, 25, 10);
			ctx.putImageData(oldBack, tankX-9, tankY);
			break;
		case 3:
			back = ctx.getImageData(tankX, tankY-20, 10, 25);
			oldBack = ctx.getImageData(tankX, tankY-20, 10, 25);
			ctx.fillStyle = "black";
	       		ctx.rect(tankX, tankY-20, 10, 15);
	        	ctx.fill();
			ctx.fillStyle = "black";
       			ctx.rect(tankX+4, tankY-5, 2, 7);
        		ctx.fill();
			ctx.fillStyle = "black";
       			ctx.rect(tankX+3, tankY+2, 4, 2);
        		ctx.fill();
			tank = ctx.getImageData(tankX, tankY-20, 10, 25);
			ctx.putImageData(oldBack, tankX, tankY-20);
			
			break;
		case 4:
			back = ctx.getImageData(tankX, tankY-29, 10, 24);
			oldBack = ctx.getImageData(tankX, tankY-29, 10, 24);
			ctx.fillStyle = "black";
	       		ctx.rect(tankX, tankY-20, 10, 15);
	        	ctx.fill();
			ctx.fillStyle = "black";
       			ctx.rect(tankX+4, tankY-27, 2, 7);
        		ctx.fill();
			ctx.fillStyle = "black";
       			ctx.rect(tankX+3, tankY-29, 4, 2);
        		ctx.fill();
			tank = ctx.getImageData(tankX, tankY-29, 10, 24);
			ctx.putImageData(oldBack, tankX, tankY-29);
			break;
		}
	}
	
	function doGameLoop() {
	        ctx.putImageData(oldBack, oldtankX, oldtankY);
	        ctx.putImageData(tank, tankX, tankY);
        }

	function whatKey(evt) {

        	oldtankX = tankX;
        	oldtankY = tankY;
        	oldBack = back;
		switch (evt.keyCode) {

	        case 37:
		          tankX = tankX - 10;
			  if(type != 2)
			  {
			  	makeTank(2);
				type = 2;
		          }
			break;

	        case 39:
		          tankX = tankX + 10;
			if(type != 1)
			{
			 	 makeTank(1);
				type = 1;			
			}		         
			 break;

	        case 40:
        		if(type != 3)
			{
			 	 makeTank(3);
				type = 3;			
			}
          		break;

      	      	 case 38:
         		 tankY = tankY - 10;
			 if(type != 4)
			{
			 	 makeTank(4);
				type = 4;			
			}
         		 break;

       		 default:
        		  alert("Please only use the arrow keys.");
		}

        }

        </script>
	</head>
	<body onload="game()">
		<h1>
      		Tanks
    		</h1>
    		<canvas id='example' width="1024" height="720"> </canvas>
    	</body>
</html>
